{"version":3,"file":"bar.js","sourceRoot":"","sources":["../../app/apis/bar.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAAuC;AACvC,gDAAyC;AACzC,wDAAyD;AAgB5C,QAAA,MAAM,GAAG,IAAI,eAAG,CAA8B,QAAQ,EAAE,UAAC,MAAM,EAAE,KAAK;IAC/E,IAAM,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sGAA2D,CAAC;IAC7E,IAAM,YAAY,GAAG,IAAI,eAAe,CAAC,MAAa,CAAC,CAAC;IACxD,IAAM,eAAe,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC;IAClD,OAAO,CAAC,yEAAO,EAA+D,EAAE,EAAe;;YAA9E,eAAqB,EAArB,OAAO,mBAAG,WAAW,KAAA,EAAE,aAAS,EAAT,KAAK,mBAAG,CAAC,KAAA,EAAE,gBAAY,EAAZ,QAAQ,mBAAG,CAAC,KAAA,EAAE,cAAW,EAAX,MAAM,mBAAG,EAAE,KAAA;YAAM,MAAM,YAAA,EAAE,GAAG,SAAA;;;;oBACnF,KAAK,GAAG,GAAG,mRAAC,+BAEd,EAA8C,eAC9C,EAA4C,iBACzC,EAA2B,4CAEhB,EAAQ,iCACJ,EAAM,qBACjB,EAA4C,uBAC/C,EAAK,UACd,KARK,+BAAe,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,EAC9C,+BAAe,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,EACzC,+BAAe,CAAC,WAAW,EAEhB,QAAQ,EACJ,MAAM,EACjB,+BAAe,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,EAC/C,KAAK,CACd,CAAC;oBACa,qBAAM,MAAM,CAAC,KAAK,CAAC,OAAO,CAAe,KAAK,CAAC,EAAA;;oBAAtD,IAAI,GAAG,SAA+C;oBACrD,qBAAM,IAAI,CAAC,IAAI,EAAE,EAAA;wBAAxB,sBAAO,SAAiB,EAAC;;;SAC5B,CAAC,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;AAC/B,CAAC,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAEC,IAAI,CAAC,KAAK,CAAC,sjBAAsjB,CAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAE1kB,CAAC","sourcesContent":["import ____moose____typia from \"typia\";\nimport { Api } from \"@514labs/moose-lib\";\nimport { BarAggregatedMV } from \"../views/barAggregated\";\nimport { tags } from \"typia\";\n// This file is where you can define your APIs to consume your data\ninterface QueryParams {\n    orderBy?: \"totalRows\" | \"rowsWithText\" | \"maxTextLength\" | \"totalTextLength\";\n    limit?: number;\n    startDay?: number & tags.Type<\"int32\">;\n    endDay?: number & tags.Type<\"int32\">;\n}\ninterface ResponseData {\n    dayOfMonth: number;\n    totalRows?: number;\n    rowsWithText?: number;\n    maxTextLength?: number;\n    totalTextLength?: number;\n}\nexport const BarApi = new Api<QueryParams, ResponseData[]>(\"barApi\", (params, utils) => {\n    const assertGuard = ____moose____typia.http.createAssertQuery<QueryParams>();\n    const searchParams = new URLSearchParams(params as any);\n    const processedParams = assertGuard(searchParams);\n    return (async ({ orderBy = \"totalRows\", limit = 5, startDay = 1, endDay = 31 }, { client, sql }) => {\n        const query = sql `\n        SELECT \n          ${BarAggregatedMV.targetTable.columns.dayOfMonth},\n          ${BarAggregatedMV.targetTable.columns[orderBy]}\n        FROM ${BarAggregatedMV.targetTable}\n        WHERE \n          dayOfMonth >= ${startDay} \n          AND dayOfMonth <= ${endDay}\n        ORDER BY ${BarAggregatedMV.targetTable.columns[orderBy]} DESC\n        LIMIT ${limit}\n      `;\n        const data = await client.query.execute<ResponseData>(query);\n        return await data.json();\n    })(processedParams, utils);\n}, {}, ____moose____typia.json.schemas<[\n    QueryParams\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"orderBy\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"limit\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"startDay\\\",\\\"data_type\\\":\\\"Int32\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"endDay\\\",\\\"data_type\\\":\\\"Int32\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]}]\") as any, ____moose____typia.json.schemas<[\n    ResponseData[]\n]>());\n"]}