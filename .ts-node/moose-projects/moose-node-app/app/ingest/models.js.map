{"version":3,"file":"models.js","sourceRoot":"","sources":["../../../../../app/ingest/models.ts"],"names":[],"mappings":";;;AAAA,gDAAyD;AAmBzD,6CAA6C;AAC7C,yBAAyB;AACZ,QAAA,WAAW,GAAG,IAAI,0BAAc,CAAM,KAAK,EAAE;IACtD,KAAK,EAAE,IAAI,EAAE,oCAAoC;IACjD,MAAM,EAAE,IAAI,EAAE,0BAA0B;IACxC,MAAM,EAAE,IAAI,EAAE,mBAAmB;CACpC,CAAC,CAAC;AACH,4FAA4F;AAC/E,QAAA,WAAW,GAAG,IAAI,0BAAc,CAAM,KAAK,EAAE;IACtD,kFAAkF;IAClF,KAAK,EAAE,IAAI,EAAE,oCAAoC;IACjD,MAAM,EAAE,IAAI,EAAE,2BAA2B;IACzC,MAAM,EAAE,KAAK,EAAE,wCAAwC;CAC1D,CAAC,CAAC","sourcesContent":["import { IngestPipeline, Key } from \"@514labs/moose-lib\";\n/**\n * Data Pipeline: Raw Record (Foo) → Processed Record (Bar)\n * Raw (Foo) → HTTP → Raw Stream → Transform → Derived (Bar) → Processed Stream → DB Table\n */\n/** =======Data Models========= */\n/** Raw data ingested via API */\nexport interface Foo {\n    primaryKey: Key<string>; // Unique ID\n    timestamp: number; // Unix timestamp\n    optionalText?: string; // Text to analyze\n}\n/** Analyzed text metrics derived from Foo */\nexport interface Bar {\n    primaryKey: Key<string>; // From Foo.primaryKey\n    utcTimestamp: Date; // From Foo.timestamp\n    hasText: boolean; // From Foo.optionalText?\n    textLength: number; // From Foo.optionalText.length\n}\n/** =======Pipeline Configuration========= */\n/** Raw data ingestion */\nexport const FooPipeline = new IngestPipeline<Foo>(\"Foo\", {\n    table: true, // No table; only stream raw records\n    stream: true, // Buffer ingested records\n    ingest: true, // POST /ingest/Foo\n});\n/** Buffering and storing processed records (@see transforms.ts for transformation logic) */\nexport const BarPipeline = new IngestPipeline<Bar>(\"Bar\", {\n    // path: \"pipelines/bar\", // TODO: Enable when using npm release with path support\n    table: true, // Persist in ClickHouse table \"Bar\"\n    stream: true, // Buffer processed records\n    ingest: false, // No direct ingestion, derived from Foo\n});\n"]}