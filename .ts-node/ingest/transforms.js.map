{"version":3,"file":"transforms.js","sourceRoot":"","sources":["../../app/ingest/transforms.ts"],"names":[],"mappings":";;;AAAA,mCAA8D;AAC9D,qCAAqC;AACrC,MAAA,oBAAW,CAAC,MAAM,0CAAE,YAAY,CAAC,oBAAW,CAAC,MAAO,EAAE,UAAC,GAAQ;;IAAU,OAAA,CAAC;QACtE,UAAU,EAAE,GAAG,CAAC,UAAU;QAC1B,YAAY,EAAE,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,4BAA4B;QAC1E,OAAO,EAAE,GAAG,CAAC,YAAY,KAAK,SAAS;QACvC,UAAU,EAAE,MAAA,MAAA,GAAG,CAAC,YAAY,0CAAE,MAAM,mCAAI,CAAC;KAC5C,CAAC,CAAA;CAAA,CAAC,CAAC;AACJ,+CAA+C;AAC/C,IAAM,aAAa,GAAG,UAAC,GAAQ;;IAC3B,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;IACnC,OAAO,CAAC,GAAG,CAAC,yBAAkB,GAAG,CAAC,UAAU,CAAE,CAAC,CAAC;IAChD,OAAO,CAAC,GAAG,CAAC,uBAAgB,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,CAAE,CAAC,CAAC;IAC9D,OAAO,CAAC,GAAG,CAAC,2BAAoB,MAAA,GAAG,CAAC,YAAY,mCAAI,MAAM,CAAE,CAAC,CAAC;IAC9D,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACvB,CAAC,CAAC;AACF,MAAA,oBAAW,CAAC,MAAM,0CAAE,WAAW,CAAC,aAAa,CAAC,CAAC","sourcesContent":["import { FooPipeline, BarPipeline, Foo, Bar } from \"./models\";\n// Transform Foo events to Bar events\nFooPipeline.stream?.addTransform(BarPipeline.stream!, (foo: Foo): Bar => ({\n    primaryKey: foo.primaryKey,\n    utcTimestamp: new Date(foo.timestamp * 1000), // Convert timestamp to Date\n    hasText: foo.optionalText !== undefined,\n    textLength: foo.optionalText?.length ?? 0,\n}));\n// Add a streaming consumer to print Foo events\nconst printFooEvent = (foo: Foo): void => {\n    console.log(\"Received Foo event:\");\n    console.log(`  Primary Key: ${foo.primaryKey}`);\n    console.log(`  Timestamp: ${new Date(foo.timestamp * 1000)}`);\n    console.log(`  Optional Text: ${foo.optionalText ?? \"None\"}`);\n    console.log(\"---\");\n};\nFooPipeline.stream?.addConsumer(printFooEvent);\n"]}